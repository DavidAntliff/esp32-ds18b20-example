<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ESP32-DS18B20: /home/travis/build/DavidAntliff/ESP32-DS18B20/main/ds18b20.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ESP32-DS18B20
   </div>
   <div id="projectbrief">ESP32-compatible C library for Maxim Integrated DS18B20 Programmable Resolution 1-Wire Digital Thermometer.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ds18b20.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br/>
<code>#include &quot;freertos/task.h&quot;</code><br/>
<code>#include &quot;driver/gpio.h&quot;</code><br/>
<code>#include &quot;esp_system.h&quot;</code><br/>
<code>#include &quot;esp_log.h&quot;</code><br/>
<code>#include &quot;sdkconfig.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="ds18b20_8h_source.html">ds18b20.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="owb_8h_source.html">owb.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a00a197b9f0513f05f9b8831e5bdb549a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a00a197b9f0513f05f9b8831e5bdb549a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DS18B20_FUNCTION_TEMP_CONVERT</b>&#160;&#160;&#160;0x44</td></tr>
<tr class="separator:a00a197b9f0513f05f9b8831e5bdb549a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7678d66e1a401bb395636dc417664d0d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7678d66e1a401bb395636dc417664d0d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DS18B20_FUNCTION_SCRATCHPAD_WRITE</b>&#160;&#160;&#160;0x4E</td></tr>
<tr class="separator:a7678d66e1a401bb395636dc417664d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70140f8d40a40e71b48d4386f8e82f62"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a70140f8d40a40e71b48d4386f8e82f62"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DS18B20_FUNCTION_SCRATCHPAD_READ</b>&#160;&#160;&#160;0xBE</td></tr>
<tr class="separator:a70140f8d40a40e71b48d4386f8e82f62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a783ce55ae1d89d9cd01a692a9195f51f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a783ce55ae1d89d9cd01a692a9195f51f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DS18B20_FUNCTION_SCRATCHPAD_COPY</b>&#160;&#160;&#160;0x48</td></tr>
<tr class="separator:a783ce55ae1d89d9cd01a692a9195f51f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ea9f0dbf8e2c6fa8d79d2d468a55be"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a27ea9f0dbf8e2c6fa8d79d2d468a55be"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DS18B20_FUNCTION_EEPROM_RECALL</b>&#160;&#160;&#160;0xB8</td></tr>
<tr class="separator:a27ea9f0dbf8e2c6fa8d79d2d468a55be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa067e5a0e98a6d7a23206802f8a910f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa067e5a0e98a6d7a23206802f8a910f6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DS18B20_FUNCTION_POWER_SUPPLY_READ</b>&#160;&#160;&#160;0xB4</td></tr>
<tr class="separator:aa067e5a0e98a6d7a23206802f8a910f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed8e8a35acbf8bfb53d1ee260a90f216"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#aed8e8a35acbf8bfb53d1ee260a90f216">ds18b20_malloc</a> (void)</td></tr>
<tr class="memdesc:aed8e8a35acbf8bfb53d1ee260a90f216"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new device info instance. New instance should be initialised before calling other functions.  <a href="#aed8e8a35acbf8bfb53d1ee260a90f216">More...</a><br/></td></tr>
<tr class="separator:aed8e8a35acbf8bfb53d1ee260a90f216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bcd6ceb76caa4add04ca65582eede00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a5bcd6ceb76caa4add04ca65582eede00">ds18b20_free</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> **ds18b20_info)</td></tr>
<tr class="memdesc:a5bcd6ceb76caa4add04ca65582eede00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete an existing device info instance.  <a href="#a5bcd6ceb76caa4add04ca65582eede00">More...</a><br/></td></tr>
<tr class="separator:a5bcd6ceb76caa4add04ca65582eede00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04dfe7d77916ee122dbcde74a94db628"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a04dfe7d77916ee122dbcde74a94db628">ds18b20_init</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info, <a class="el" href="struct_one_wire_bus.html">OneWireBus</a> *bus, <a class="el" href="union_one_wire_bus___r_o_m_code.html">OneWireBus_ROMCode</a> rom_code)</td></tr>
<tr class="memdesc:a04dfe7d77916ee122dbcde74a94db628"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise a device info instance with the specified GPIO.  <a href="#a04dfe7d77916ee122dbcde74a94db628">More...</a><br/></td></tr>
<tr class="separator:a04dfe7d77916ee122dbcde74a94db628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab541c507b1b9187f60ca7716640d00fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#ab541c507b1b9187f60ca7716640d00fa">ds18b20_init_solo</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info, <a class="el" href="struct_one_wire_bus.html">OneWireBus</a> *bus)</td></tr>
<tr class="memdesc:ab541c507b1b9187f60ca7716640d00fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise a device info instance with the specified GPIO as a solo device on the bus.  <a href="#ab541c507b1b9187f60ca7716640d00fa">More...</a><br/></td></tr>
<tr class="separator:ab541c507b1b9187f60ca7716640d00fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1765c5a55c8a389f11f2daebc9e0a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#ada1765c5a55c8a389f11f2daebc9e0a2">ds18b20_use_crc</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info, bool use_crc)</td></tr>
<tr class="memdesc:ada1765c5a55c8a389f11f2daebc9e0a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable use of CRC checks on device communications.  <a href="#ada1765c5a55c8a389f11f2daebc9e0a2">More...</a><br/></td></tr>
<tr class="separator:ada1765c5a55c8a389f11f2daebc9e0a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9266fa752d3f6d533250324af16e67"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a4d9266fa752d3f6d533250324af16e67">ds18b20_set_resolution</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info, <a class="el" href="ds18b20_8h.html#aa5d863756e0d9cb7548b9f166e4af9d4">DS18B20_RESOLUTION</a> resolution)</td></tr>
<tr class="memdesc:a4d9266fa752d3f6d533250324af16e67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set temperature measurement resolution.  <a href="#a4d9266fa752d3f6d533250324af16e67">More...</a><br/></td></tr>
<tr class="separator:a4d9266fa752d3f6d533250324af16e67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c90f57ce8738ad042f022adb40b864c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ds18b20_8h.html#aa5d863756e0d9cb7548b9f166e4af9d4">DS18B20_RESOLUTION</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a6c90f57ce8738ad042f022adb40b864c">ds18b20_read_resolution</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info)</td></tr>
<tr class="memdesc:a6c90f57ce8738ad042f022adb40b864c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update and return the current temperature measurement resolution from the device.  <a href="#a6c90f57ce8738ad042f022adb40b864c">More...</a><br/></td></tr>
<tr class="separator:a6c90f57ce8738ad042f022adb40b864c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2d7d5d1dec69e2ae783d42c7d73c517"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#ae2d7d5d1dec69e2ae783d42c7d73c517">ds18b20_convert</a> (const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info)</td></tr>
<tr class="memdesc:ae2d7d5d1dec69e2ae783d42c7d73c517"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a temperature measurement conversion on a single device.  <a href="#ae2d7d5d1dec69e2ae783d42c7d73c517">More...</a><br/></td></tr>
<tr class="separator:ae2d7d5d1dec69e2ae783d42c7d73c517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d5ef99f9be1eb8bf72b793a71fa259"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#ad1d5ef99f9be1eb8bf72b793a71fa259">ds18b20_convert_all</a> (const <a class="el" href="struct_one_wire_bus.html">OneWireBus</a> *bus)</td></tr>
<tr class="memdesc:ad1d5ef99f9be1eb8bf72b793a71fa259"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start temperature conversion on all connected devices.  <a href="#ad1d5ef99f9be1eb8bf72b793a71fa259">More...</a><br/></td></tr>
<tr class="separator:ad1d5ef99f9be1eb8bf72b793a71fa259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76ac59caf970799cedc280d8bc89e020"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a76ac59caf970799cedc280d8bc89e020">ds18b20_wait_for_conversion</a> (const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info)</td></tr>
<tr class="memdesc:a76ac59caf970799cedc280d8bc89e020"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the maximum conversion time according to the current resolution of the device.  <a href="#a76ac59caf970799cedc280d8bc89e020">More...</a><br/></td></tr>
<tr class="separator:a76ac59caf970799cedc280d8bc89e020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46882f8ae67710c1db987995e546da22"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a46882f8ae67710c1db987995e546da22">ds18b20_read_temp</a> (const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info)</td></tr>
<tr class="memdesc:a46882f8ae67710c1db987995e546da22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read last temperature measurement from device.  <a href="#a46882f8ae67710c1db987995e546da22">More...</a><br/></td></tr>
<tr class="separator:a46882f8ae67710c1db987995e546da22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a555f766b32b6d7c2d0d193a365bbb6f6"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a555f766b32b6d7c2d0d193a365bbb6f6">ds18b20_convert_and_read_temp</a> (const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info)</td></tr>
<tr class="memdesc:a555f766b32b6d7c2d0d193a365bbb6f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert, wait and read current temperature from device.  <a href="#a555f766b32b6d7c2d0d193a365bbb6f6">More...</a><br/></td></tr>
<tr class="separator:a555f766b32b6d7c2d0d193a365bbb6f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Resolution is cached in the <a class="el" href="struct_d_s18_b20___info.html" title="Structure containing information related to a single DS18B20 device connected via a 1-Wire bus...">DS18B20_Info</a> object to avoid querying the hardware every time a temperature conversion is required. However this can result in the cached value becoming inconsistent with the hardware value, so care must be taken. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aed8e8a35acbf8bfb53d1ee260a90f216"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a>* ds18b20_malloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new device info instance. New instance should be initialised before calling other functions. </p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to new device info instance, or NULL if it cannot be created. </dd></dl>

</div>
</div>
<a class="anchor" id="a5bcd6ceb76caa4add04ca65582eede00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ds18b20_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> **&#160;</td>
          <td class="paramname"><em>ds18b20_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete an existing device info instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance that will be freed and set to NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a04dfe7d77916ee122dbcde74a94db628"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ds18b20_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_one_wire_bus.html">OneWireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="union_one_wire_bus___r_o_m_code.html">OneWireBus_ROMCode</a>&#160;</td>
          <td class="paramname"><em>rom_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise a device info instance with the specified GPIO. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>Pointer to initialised 1-Wire bus instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rom_code</td><td>Device-specific ROM code to identify a device on the bus. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab541c507b1b9187f60ca7716640d00fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ds18b20_init_solo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_one_wire_bus.html">OneWireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise a device info instance with the specified GPIO as a solo device on the bus. </p>
<p>This is subject to the requirement that this device is the ONLY device on the bus. This allows for faster commands to be used without ROM code addressing.</p>
<p>NOTE: if additional devices are added to the bus, operation will cease to work correctly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>Pointer to initialised 1-Wire bus instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rom_code</td><td>Device-specific ROM code to identify a device on the bus. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ada1765c5a55c8a389f11f2daebc9e0a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ds18b20_use_crc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_crc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable or disable use of CRC checks on device communications. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">use_crc</td><td>True to enable CRC checks, false to disable. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4d9266fa752d3f6d533250324af16e67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ds18b20_set_resolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ds18b20_8h.html#aa5d863756e0d9cb7548b9f166e4af9d4">DS18B20_RESOLUTION</a>&#160;</td>
          <td class="paramname"><em>resolution</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set temperature measurement resolution. </p>
<p>This programs the hardware to the specified resolution and sets the cached value to be the same. If the program fails, the value currently in hardware is used to refresh the cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resolution</td><td>Selected resolution. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if successful, otherwise false. </dd></dl>

</div>
</div>
<a class="anchor" id="a6c90f57ce8738ad042f022adb40b864c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ds18b20_8h.html#aa5d863756e0d9cb7548b9f166e4af9d4">DS18B20_RESOLUTION</a> ds18b20_read_resolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update and return the current temperature measurement resolution from the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The currently configured temperature measurement resolution. </dd></dl>

</div>
</div>
<a class="anchor" id="ae2d7d5d1dec69e2ae783d42c7d73c517"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ds18b20_convert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a temperature measurement conversion on a single device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad1d5ef99f9be1eb8bf72b793a71fa259"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ds18b20_convert_all </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_one_wire_bus.html">OneWireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start temperature conversion on all connected devices. </p>
<p>This should be followed by a sufficient delay to ensure all devices complete their conversion before the measurements are read. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>Pointer to initialised bus instance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a76ac59caf970799cedc280d8bc89e020"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float ds18b20_wait_for_conversion </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for the maximum conversion time according to the current resolution of the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>Pointer to initialised bus instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An estimate of the time elapsed, in milliseconds. Actual elapsed time may be greater. </dd></dl>

</div>
</div>
<a class="anchor" id="a46882f8ae67710c1db987995e546da22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float ds18b20_read_temp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read last temperature measurement from device. </p>
<p>This is typically called after ds18b20_start_mass_conversion(), provided enough time has elapsed to ensure that all devices have completed their conversions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. Must be initialised first. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The measurement value returned by the device, in degrees Celsius. </dd></dl>

</div>
</div>
<a class="anchor" id="a555f766b32b6d7c2d0d193a365bbb6f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float ds18b20_convert_and_read_temp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert, wait and read current temperature from device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. Must be initialised first. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The measurement value returned by the device, in degrees Celsius. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
